!function(){function AddCareRemindFtory($http,$modal){function openModel(remindData,callBack){remindData||(remindData={});var modalInstance=$modal.open({animation:!0,templateUrl:function(){var isChack=window.location.href.indexOf("/check/");return isChack!=-1?"../src/tpl/care/carePlan/addOtherRemind.html":"src/tpl/care/carePlan/addOtherRemind.html"}(),controller:"AddCareRemindCtrl",size:"md",resolve:{remindData:function(){return remindData}}});modalInstance.result.then(function(remindData){callBack&&callBack(remindData)})}return{open:openModel}}function AddCareRemindCtrl($scope,$http,$modal,$modalInstance,toaster,remindData){function submitRemindData(data){if(!data.OtherRemind)return toaster.pop("error",null,"请输入提醒内容");var param={access_token:app.url.access_token,sendTime:data.sendTime,carePlanId:data.carePlanId,schedulePlanId:data.schedulePlanId,dateSeq:data.dateSeq,jsonData:JSON.stringify(data.OtherRemind)};data.id&&(param.id=data.id),$http.post(app.urlRoot+"designer/saveOtherRemind",param).then(function(rpn){rpn=rpn.data,rpn&&1==rpn.resultCode?$modalInstance.close(rpn.data):rpn&&rpn.resultMsg?toaster.pop("error",null,rpn.resultMsg):(toaster.pop("error",null,"获取计划数据出错"),console.error(rpn))})}$scope.remindData={sendTime:remindData.sendTime||null,carePlanId:remindData.carePlanId||null,schedulePlanId:remindData.schedulePlanId||null,dateSeq:remindData.dateSeq||null,tmpType:remindData.tmpType,OtherRemind:{content:function(){return remindData.OtherRemind&&remindData.OtherRemind.content?remindData.OtherRemind.content:""}()}},remindData.id&&($scope.remindData.id=remindData.id),$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.ok=function(){submitRemindData($scope.remindData)}}angular.module("app").factory("AddCareRemindFtory",AddCareRemindFtory),AddCareRemindFtory.$inject=["$http","$modal"],angular.module("app").controller("AddCareRemindCtrl",AddCareRemindCtrl)}();