"use strict";app.controller("Evaluation",function($rootScope,$scope,$state,$http,utils,$modal,Doctor){$scope.tabs={},$scope.tabs.active=[!0,!1,!1],$scope.tabs.byFinance=function(){$scope.ofDisease=!0,setTimeout(function(){"function"==typeof $scope.refresh[0]&&$scope.refresh[0]()},50)},$scope.tabs.byPatient=function(){$scope.ofTitle=!0,"function"==typeof $scope.refresh[1]&&$scope.refresh[1]()},$scope.tabs.byDoctor=function(){$scope.ofArea=!0,setTimeout(function(){"function"==typeof $scope.refresh[2]&&$scope.refresh[2]()},50)}}),app.controller("EvaluationByDoctor",function($rootScope,$scope,$state,$http,utils,$modal,Doctor){function initTable(){var _index,_start,subs=[],searchTimes=0,index=1,start=0,length=1*utils.localData("page_length")||20,num=0,size=20,idx=0,chk_val=!0,params={keyword:keyword},setTable=function(){function submit(){$scope.searching=!0,params.keyword=keyWord,dTable.fnDestroy(),setTable()}doctorList=$("#evaluationByDoctor"),dTable=doctorList.dataTable({draw:index,displayStart:start,lengthMenu:[5,10,15,20,30,40,50,100],pageLength:length,bServerSide:!0,sAjaxSource:url,fnServerData:function(sSource,aoData,fnCallback){num=1,idx=index-1,params.access_token=app.url.access_token,params.groupId=groupId,params.showOnJob=chk_val,params.pageIndex=index-1,params.pageSize=aoData[4].value,$.ajax({type:"post",url:sSource,dataType:"json",data:params,success:function(resp){for(var i=0;i<resp.data.pageData.length;i++)utils.extendHash(resp.data.pageData[i],["name","value","title","departments","hospital","telephone"]);resp.start=resp.data.start,resp.recordsTotal=resp.data.total,resp.recordsFiltered=resp.data.total,resp.length=resp.data.pageSize,resp.data=resp.data.pageData,size=aoData[4].value,$scope.loading=!1,fnCallback(resp)}})},language:app.lang.datatables.translation,createdRow:function(nRow,aData,iDataIndex){var a_link=$(nRow).find(".a-link");$(nRow).find(".detail-link");a_link.click(function(e){var evt=e||window.event;evt.stopPropagation(),$scope.seeDetails(aData.id)}),$(nRow).on("click","button",function(){$rootScope.curDoctorId=aData.id,$rootScope.curDoctorName=aData.name,utils.localData("curDoctorId",aData.id),utils.localData("curDoctorName",aData.name),aData.showOnJob=chk_val,showPop(aData)}),num++},columns:[{orderable:!1,render:function(set,status,dt){return'<span class="text-num">'+(idx*size+num)+"</span>"},searchable:!1},{orderable:!1,render:function(set,status,dt){if(dt.headPicFileName)var path=dt.headPicFileName;else var path="src/img/a0.jpg";return'<img class="a-link" src="'+path+'"/></a>'},searchable:!1},{orderable:!1,searchable:!1,render:function(set,status,dt){return'<a class="a-link">'+dt.name+"</a>"}},{data:"hospital",orderable:!1},{data:"departments",orderable:!1},{data:"title",orderable:!1},{data:"value",orderable:!1,searchable:!1},{data:null,orderable:!1,searchable:!1,render:function(set,status,dt){return'<button class="detail-link btn btn-primary">查 询</button>'}}]});var wrapper=$("#evaluationByDoctor_filter"),_form=$("<form></form>"),_lb=$('<label class="checkbox i-checks m-r-lg"><i style="position:relative;top:0;width:20px;"></i>只显示在职医生</label>'),_lbl=wrapper.addClass("group-search").children("label").append(_i),_i=$('<i ng-show="loaded" class="fa icon-magnifier"></i>'),_ipt=_lbl.find("input").attr("placeholder","按医生姓名 / 电话搜索").attr("autocomplete","off"),_timer=0,_temp="";_chk=$('<input type="checkbox" style="width:auto" checked />'),wrapper.append(_form),_form.append(_lb),_lb.prepend(_chk),_form.append(_lbl),_lbl.html("").append(_ipt).append(_i),chk_val?(_chk.attr("checked",!0),chk_val=!0):(_chk.attr("checked",!1),chk_val=!1),_chk.click(function(){chk_val=!chk_val,dTable.fnDestroy(),setTable()}),_ipt.focus(function(){_timer=setInterval(function(){var val=$.trim(_ipt.val());val?(isSearching=!0,_i.removeClass("icon-magnifier").addClass("fa-times-circle"),keyWord=_temp=val):(isSearching=!1,_i.removeClass("fa-times-circle").addClass("icon-magnifier"),_temp&&!val&&($scope.searching=!1,keyWord=_temp="",start=length*(index-1),params.keyword=null,dTable.fnDestroy(),setTable()))},100)}),_ipt.blur(function(){clearInterval(_timer)}),_i.click(function(){isSearching=!1,keyWord=_temp="",_ipt.trigger("submit"),_ipt.val(""),_i.removeClass("fa-times-circle").addClass("icon-magnifier"),start=length*(index-1),dTable.fnDestroy(),params.keyword=null,setTable()}),_ipt.val(keyWord).trigger("focus"),utils.keyHandler(_ipt,{key13:submit}),dTable.off().on("draw.dt",function(e,settings,len){}).on("length.dt",function(e,settings,len){index=1,start=0,length=len,dTable.fnDestroy(),setTable(),utils.localData("page_length",len)}).on("page.dt",function(e,settings){subs=[],isSearching||(index=Math.floor(settings._iDisplayStart/length)+1)}).on("search.dt",function(e,settings){isSearching?(index=1,start=0):searchTimes>0&&(searchTimes=0,index=_index,start=_start,dTable.fnDestroy(),setTable())})};setTable()}function showPop(data){$modal.open({animation:!0,templateUrl:"invitedDoctor_list.html",controller:"invitedDoctorList",size:"lg",resolve:{item:function(){return data}}})}var url=app.url.yiliao.inviteDoctor,groupId=($("html"),$("body"),utils.localData("curGroupId"));"list_pass"!==$rootScope.pageName&&(utils.localData("page_index",null),utils.localData("page_start",null),$rootScope.pageName="list_pass",$rootScope.scrollTop=0),$scope.seeInvitationList=function(id){(id||"0"==id)&&$state.go("app.doctor_list",{id:id},{reload:!1})},$scope.seeDetails=function(id){id&&($("#doctor_details").removeClass("hide"),$rootScope.winVisable=!0,Doctor.addData(id))};var doctorList,dTable,keyWord,_chk,keyword,isSearching=!1;initTable()}),app.controller("invitedDoctorList",function($rootScope,$scope,$state,$http,utils,$modalInstance,Doctor,item){setTimeout(function(){function initTable(){var index=1*utils.localData("page_index")||1,start=1*utils.localData("page_start")||0,length=1*utils.localData("page_length")||5,setTable=function(){doctorList=$("#inviteDoctorList"),dTable=doctorList.dataTable({draw:index,displayStart:start,lengthMenu:[5,10,15,20,30,40,50,100],pageLength:length,bServerSide:!0,sAjaxSource:url,fnServerData:function(sSource,aoData,fnCallback){$.ajax({type:"post",url:sSource,dataType:"json",data:{access_token:app.url.access_token,groupId:groupId,showOnJob:item.showOnJob,doctorId:doctorId,pageIndex:index-1,pageSize:aoData[4].value},success:function(resp){for(var i=0;i<resp.data.pageData.length;i++)utils.extendHash(resp.data.pageData[i],["name","hospital","title","departments","telephone","statusName","time"]);resp.start=resp.data.start,resp.recordsTotal=resp.data.total,resp.recordsFiltered=resp.data.total,resp.length=resp.data.pageSize,resp.data=resp.data.pageData,fnCallback(resp),$scope.loading=!1}})},searching:!1,language:app.lang.datatables.translation,createdRow:function(nRow,aData,iDataIndex){var a_link=$(nRow).find(".a-link");a_link.click(function(e){var evt=e||window.event;evt.stopPropagation(),$scope.seeDetails(aData.id)})},columns:[{orderable:!1,render:function(set,status,dt){if(dt.headPicFileName)var path=dt.headPicFileName;else var path="src/img/a0.jpg";return'<img class="a-link" src="'+path+'"/></a>'},searchable:!1},{orderable:!1,searchable:!1,render:function(set,status,dt){return'<a class="a-link">'+dt.name+"</a>"}},{data:"title",orderable:!1,searchable:!1},{data:"departments",orderable:!1,searchable:!1},{data:"hospital",orderable:!1,searchable:!1},{data:"telephone",orderable:!1,searchable:!1},{data:"statusName",orderable:!1,searchable:!1},{data:"time",orderable:!1,searchable:!1}]}),dTable.off().on("length.dt",function(e,settings,len){index=1,start=0,length=len,dTable.fnDestroy(),setTable()}).on("page.dt",function(e,settings){index=settings._iDisplayStart/length+1,start=length*(index-1),dTable.fnDestroy(),setTable()})};setTable()}var url=app.url.yiliao.inviteDoctor,groupId=($("html"),$("body"),utils.localData("curGroupId")),doctorId=$scope.curDoctorId||"0"==$scope.curDoctorId?$scope.curDoctorId:utils.localData("curDoctorId"),curDoctorName=$scope.curDoctorName||utils.localData("curDoctorName");$scope.viewData={},$scope.viewData.curDoctorName=curDoctorName&&curDoctorName.constructor==Array?"XXX":curDoctorName,"list_pass"!==$rootScope.pageName&&(utils.localData("page_index",null),utils.localData("page_start",null),$rootScope.pageName="list_pass",$rootScope.scrollTop=0),$scope.seeDetails=function(id){id&&($("#doctor_details").removeClass("hide"),$rootScope.winVisable=!0,Doctor.addData(id))};var doctorList,dTable;initTable(),$scope.cancel=function(){$modalInstance.dismiss("cancel")}},1)}),app.controller("EvaluationByFinace",function($rootScope,$scope,$state,$http,utils,$modal,Doctor){function initTable(){var subs=[],index=1,start=0,length=10,idx=0,size=50,searchTimes=0,chk_val=!0,num=0,params={keyword:keyword},setTable=function(){function submit(){$scope.searching=!0,params.keyword=keyWord,dTable.fnDestroy(),setTable()}dTable=$("#evaluationByFinace").dataTable({language:app.lang.datatables.translation,ordering:!1,bAutoWidth:!1,draw:index,displayStart:start,lengthMenu:[10,15,20,30,40,50,100],pageLength:length,bServerSide:!0,sAjaxSource:app.urlRoot+"group/stat/orderMoney",fnServerData:function(sSource,aoData,fnCallback){num=1,idx=index-1,params.access_token=app.url.access_token,params.groupId=groupId,params.doctorId=null,params.showOnJob=chk_val,params.pageIndex=index-1,params.pageSize=aoData[4].value,$.ajax({type:"post",url:sSource,dataType:"json",data:params,success:function(resp){var data={};data.recordsTotal=resp.data.total,data.recordsFiltered=resp.data.total,data.length=resp.data.pageSize,data.data=resp.data.pageData;for(var i=0;i<data.data.length;i++)utils.extendHash(data.data[i],["name","amount","hospital","departments","title","money"]);size=aoData[4].value,fnCallback(data)}})},aoColumns:[{orderable:!1,render:function(set,status,dt){return'<span class="text-num">'+(idx*size+num)+"</span>"},searchable:!1},{orderable:!1,render:function(set,status,dt){if(dt.headPicFileName)var path=dt.headPicFileName;else var path="src/img/a0.jpg";return'<img class="a-link" src="'+path+'"/></a>'},searchable:!1},{orderable:!1,searchable:!1,render:function(set,status,dt){return'<a class="a-link">'+dt.name+"</a>"}},{data:"hospital"},{data:"departments"},{data:"title"},{data:"amount"},{data:"money",orderable:!0},{data:null,defaultContent:"<button class='btn btn-primary'>查 询</button>"}],createdRow:function(nRow,aData,iDataIndex){var a_link=$(nRow).find(".a-link");a_link.click(function(){$scope.seeDetails(aData.id)}),$(nRow).on("click","button",function(){aData.showOnJob=chk_val,showPop(aData)}),num++}});var wrapper=$("#evaluationByFinace_filter"),_form=$("<form></form>"),_lb=$('<label class="checkbox i-checks m-r-lg"><i style="position:relative;top:0;width:20px;"></i>只显示在职医生</label>'),_lbl=wrapper.addClass("group-search").children("label").append(_i),_i=$('<i ng-show="loaded" class="fa icon-magnifier"></i>'),_ipt=_lbl.find("input").attr("placeholder","按医生姓名 / 电话搜索").attr("autocomplete","off"),_timer=0,_temp="";_chk=$('<input type="checkbox" style="width:auto" checked />'),wrapper.append(_form),_form.append(_lb),_lb.prepend(_chk),_form.append(_lbl),_lbl.html("").append(_ipt).append(_i),chk_val?(_chk.attr("checked",!0),chk_val=!0):(_chk.attr("checked",!1),chk_val=!1),_chk.click(function(){chk_val=!chk_val,dTable.fnDestroy(),setTable()}),_ipt.focus(function(){_timer=setInterval(function(){var val=$.trim(_ipt.val());val?(isSearching=!0,_i.removeClass("icon-magnifier").addClass("fa-times-circle"),keyWord=_temp=val):(isSearching=!1,_i.removeClass("fa-times-circle").addClass("icon-magnifier"),_temp&&!val&&($scope.searching=!1,keyWord=_temp="",start=length*(index-1),params.keyword=null,dTable.fnDestroy(),setTable()))},100)}),_ipt.blur(function(){clearInterval(_timer)}),_i.click(function(){isSearching=!1,keyWord=_temp="",_ipt.trigger("submit"),_ipt.val(""),_i.removeClass("fa-times-circle").addClass("icon-magnifier"),start=length*(index-1),dTable.fnDestroy(),params.keyword=null,setTable()}),_ipt.val(keyWord).trigger("focus"),utils.keyHandler(_ipt,{key13:submit}),dTable.off().on("draw.dt",function(e,settings,len){}).on("length.dt",function(e,settings,len){index=1,start=0,length=len,dTable.fnDestroy(),setTable(),utils.localData("page_length",len)}).on("page.dt",function(e,settings){subs=[],isSearching||(index=Math.floor(settings._iDisplayStart/length)+1)}).on("search.dt",function(e,settings){isSearching?(index=1,start=0):searchTimes>0&&(searchTimes=0,index=_index,start=_start,dTable.fnDestroy(),setTable())})};setTable()}function showPop(doctorData){$modal.open({animation:!0,templateUrl:"myModalContent.html",controller:"getOrdersCtrl",size:"lg",resolve:{doctorData:function(){return doctorData}}})}var groupId=localStorage.getItem("curGroupId");$scope.seeDetails=function(id){id&&($("#doctor_details").removeClass("hide"),$rootScope.winVisable=!0,Doctor.addData(id))};var dTable,keyWord,_chk,keyword,isSearching=!1;initTable()}),app.controller("getOrdersCtrl",function($scope,$modalInstance,$http,utils,doctorData,Doctor){function initTable(){var index=1,start=0,length=10,setTable=function(){var dTable=$("#ordersTable").dataTable({language:app.lang.datatables.translation,ordering:!1,searching:!1,draw:index,displayStart:start,lengthMenu:[10,15,20,30,40,50,100],pageLength:length,bServerSide:!0,sAjaxSource:app.urlRoot+"group/stat/orderMoney",fnServerData:function(sSource,aoData,fnCallback){$.ajax({type:"post",url:sSource,dataType:"json",data:{access_token:app.url.access_token,groupId:localStorage.getItem("curGroupId"),doctorId:doctorData.id,showOnJob:doctorData.showOnJob,pageIndex:index-1,pageSize:aoData[4].value},success:function(resp){for(var i=0;i<resp.data.pageData.length;i++)utils.extendHash(resp.data.pageData[i],["orderNo","name","statusName","telephone","money","time"]);var data={};data.recordsTotal=resp.data.total,data.recordsFiltered=resp.data.total,data.length=resp.data.pageSize,data.data=resp.data.pageData,console.log(resp),console.log(data);for(var i=0;i<data.data.length;i++)utils.extendHash(data.data[i],["orderNo","packName","name","telephone"]);fnCallback(data)}})},aoColumns:[{data:"orderNo",defaultContent:"",searchable:!1},{data:"packName",searchable:!1},{data:"name",orderable:!1,searchable:!1},{data:"telephone",searchable:!1},{data:"time",render:function(data){return data?utils.dateFormat(data,"yyyy年MM月dd日，hh点mm分"):""},orderable:!0,searchable:!1},{data:"money",searchable:!1}]});dTable.off().on("page.dt",function(e,settings){length=settings._iDisplayLength,index=settings._iDisplayStart/length+1,start=length*(index-1),dTable.fnDestroy(),setTable()}).on("length.dt",function(e,settings,len){index=1,start=0,length=len,dTable.fnDestroy(),setTable()})};setTable()}$scope.docName=doctorData.name,$scope.docIncome=doctorData.money,$scope.seeDetails=function(id){id&&($("#doctor_details").removeClass("hide"),$rootScope.winVisable=!0,Doctor.addData(id))},setTimeout(initTable,0),$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),function(){app.controller("EvaluationByPatient",function($rootScope,$scope,$state,$http,utils,$modal,Doctor){function initTable(){var _index,_start,subs=[],searchTimes=0,chk_val=!0,index=1,start=0,length=10,num=0,size=50,idx=0,params={keyword:keyword},setTable=function(){function submit(){$scope.searching=!0,params.keyword=keyWord,dTable.fnDestroy(),setTable()}doctorList=$("#evaluationByPatient"),dTable=doctorList.dataTable({draw:index,displayStart:start,lengthMenu:[5,10,15,20,30,40,50,100],pageLength:length,bServerSide:!0,sAjaxSource:url,fnServerData:function(sSource,aoData,fnCallback){num=1,idx=index-1,params.access_token=app.url.access_token,params.groupId=groupId,params.showOnJob=chk_val,params.pageIndex=index-1,params.pageSize=aoData[4].value,$.ajax({type:"post",url:sSource,dataType:"json",data:params,success:function(resp){resp.start=resp.data.start,resp.recordsTotal=resp.data.total,resp.recordsFiltered=resp.data.total,resp.length=resp.data.pageSize,resp.data=resp.data.pageData,size=aoData[4].value,fnCallback(resp)}})},language:app.lang.datatables.translation,createdRow:function(nRow,aData,iDataIndex){var a_link=$(nRow).find(".a-link");a_link.click(function(){aData.id&&$scope.seeDetails(aData.id)}),$(nRow).on("click","button",function(){aData.showOnJob=chk_val,showPop(aData)}),num++},columns:[{orderable:!1,render:function(set,status,dt){return'<span class="text-num">'+(idx*size+num)+"</span>"},searchable:!1},{orderable:!1,render:function(set,status,dt){if(dt.headPicFileName)var path=dt.headPicFileName;else var path="src/img/a0.jpg";return'<img class="a-link" src="'+path+'"/></a>'},searchable:!1},{data:"name",render:function(data,type,row){return void 0==row.name?"":'<a class="a-link">'+data+"</a>"},orderable:!1,searchable:!1},{data:"hospital",render:function(data,type,row){return void 0==row.hospital?"":row.hospital},orderable:!1},{data:"departments",render:function(data,type,row){return void 0==row.departments?"":row.departments},orderable:!1},{data:"title",render:function(data,type,row){return void 0==row.title?"":row.title},orderable:!1},{data:"value",render:function(data,type,row){return void 0==row.value?"":row.value},orderable:!1},{data:null,defaultContent:"<button class='btn btn-primary'>查 询</button>",orderable:!1}],order:[[4,"desc"]]});var wrapper=$("#evaluationByPatient_filter"),_form=$("<form></form>"),_lb=$('<label class="checkbox i-checks m-r-lg"><i style="position:relative;top:0;width:20px;"></i>只显示在职医生</label>'),_lbl=wrapper.addClass("group-search").children("label").append(_i),_i=$('<i ng-show="loaded" class="fa icon-magnifier"></i>'),_ipt=_lbl.find("input").attr("placeholder","按医生姓名 / 电话搜索").attr("autocomplete","off"),_timer=0,_temp="";_chk=$('<input type="checkbox" style="width:auto" checked />'),wrapper.append(_form),_form.append(_lb),_lb.prepend(_chk),_form.append(_lbl),_lbl.html("").append(_ipt).append(_i),chk_val?(_chk.attr("checked",!0),chk_val=!0):(_chk.attr("checked",!1),chk_val=!1),_chk.click(function(){chk_val=!chk_val,dTable.fnDestroy(),setTable()}),_ipt.focus(function(){_timer=setInterval(function(){var val=$.trim(_ipt.val());val?(isSearching=!0,_i.removeClass("icon-magnifier").addClass("fa-times-circle"),keyWord=_temp=val):(isSearching=!1,_i.removeClass("fa-times-circle").addClass("icon-magnifier"),_temp&&!val&&($scope.searching=!1,keyWord=_temp="",start=length*(index-1),params.keyword=null,dTable.fnDestroy(),setTable()))},100)}),_ipt.blur(function(){clearInterval(_timer)}),_i.click(function(){isSearching=!1,keyWord=_temp="",_ipt.trigger("submit"),_ipt.val(""),_i.removeClass("fa-times-circle").addClass("icon-magnifier"),start=length*(index-1),dTable.fnDestroy(),params.keyword=null,setTable()}),_ipt.val(keyWord).trigger("focus"),utils.keyHandler(_ipt,{key13:submit}),dTable.off().on("draw.dt",function(e,settings,len){}).on("length.dt",function(e,settings,len){index=1,start=0,length=len,dTable.fnDestroy(),setTable(),utils.localData("page_length",len)}).on("page.dt",function(e,settings){subs=[],isSearching||(index=Math.floor(settings._iDisplayStart/length)+1)}).on("search.dt",function(e,settings){isSearching?(index=1,start=0):searchTimes>0&&(searchTimes=0,index=_index,start=_start,dTable.fnDestroy(),setTable())})};setTable()}function showPop(data){$modal.open({animation:!0,templateUrl:"patientModalContent.html",controller:"PatientCtrl",size:"lg",resolve:{item:function(){return data}}})}var groupId=(localStorage.getItem("access_token"),localStorage.getItem("curGroupId"));$scope.seeDetails=function(id){id&&($("#doctor_details").removeClass("hide"),$rootScope.winVisable=!0,Doctor.addData(id))};var doctorList,dTable,keyWord,_chk,keyword,url=app.url.yiliao.getDocInviteNum,isSearching=!1;initTable()}),app.controller("PatientCtrl",function($scope,$modalInstance,$http,item,$rootScope,Doctor,utils){var access_token=localStorage.getItem("access_token"),curGroupId=localStorage.getItem("curGroupId");$scope.doctorName=item.name,setTimeout(function(){function initTable(){var index=1,start=0,length=5,setTable=function(){patientList=$("#patientsTable"),dTable=patientList.dataTable({draw:index,displayStart:start,lengthMenu:[5,10,15,20],pageLength:length,bServerSide:!0,sAjaxSource:url,fnServerData:function(sSource,aoData,fnCallback){param.pageIndex=index-1,param.pageSize=aoData[4].value,console.log("index is:"+index),$.ajax({type:"post",url:sSource,dataType:"json",data:param,success:function(resp){for(var i=0;i<resp.data.pageData.length;i++)utils.extendHash(resp.data.pageData[i],["name","sex","ageStr","statusName","telephone","statusName","time"]);resp.start=resp.data.start,resp.recordsTotal=resp.data.total,resp.recordsFiltered=resp.data.total,resp.length=resp.data.pageSize,resp.data=resp.data.pageData,fnCallback(resp)}})},searching:!1,language:app.lang.datatables.translation,createdRow:function(nRow,aData,iDataIndex){var a_link=$(nRow).find(".a-link");a_link.click(function(e){var evt=e||window.event;evt.stopPropagation()})},columns:[{orderable:!1,render:function(set,status,dt){if(dt.headPicFileName)var path=dt.headPicFileName;else var path="src/img/a0.jpg";return'<img class="a-link" src="'+path+'"/>'},searchable:!1},{data:"name",orderable:!1,render:function(set,status,dt){return'<a class="a-link">'+dt.name+"</a>"},searchable:!1},{data:"sex",render:function(data,type,row){return void 0==row.sex?"":1==row.sex?"男":2==row.sex?"女":3==row.sex?"保密":"未知"},orderable:!1,searchable:!1},{data:"ageStr",render:function(data,type,row){return void 0==data?"":data},orderable:!1,searchable:!1},{data:"telephone",render:function(data,type,row){return void 0==row.telephone?"":row.telephone},orderable:!1,searchable:!1},{data:"statusName",orderable:!1,searchable:!1},{data:"time",render:function(data,type,row){return void 0==row.time?"":row.time},orderable:!1,searchable:!1}]}),dTable.off().on("length.dt",function(e,settings,len){index=1,start=0,length=len,dTable.fnDestroy(),setTable()}).on("page.dt",function(e,settings){index=settings._iDisplayStart/length+1,start=length*(index-1),dTable.fnDestroy(),setTable()})};setTable()}var url=app.url.yiliao.getDocInvitePatient,param={access_token:access_token,groupId:curGroupId,showOnJob:item.showOnJob,doctorId:item.id};$scope.seeDetails=function(id){id&&($("#doctor_details").removeClass("hide"),$rootScope.winVisable=!0,Doctor.addData(id))};var patientList,dTable;initTable()},1),$scope.cancel=function(){$modalInstance.dismiss("cancel")}})}();