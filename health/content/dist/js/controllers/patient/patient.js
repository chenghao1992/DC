"use strict";app.controller("Patient",function($rootScope,$scope,$state,$http,$compile,utils,$stateParams){function forward(info){$scope.curIndex=null,"0"!=info.id||"x"!=info.pid||isDiseaseType?"x"!=info.pid||isDiseaseType?isDiseaseType?"x"==info.pid?($rootScope.curType="4",$rootScope.typeName="病种"):($rootScope.curType="4",$rootScope.typeName="病种"):($rootScope.curType="2",$rootScope.typeName="组织"):($rootScope.curType="3",$rootScope.typeName="医生"):($rootScope.curType="1",$rootScope.typeName="集团"),$rootScope.curId=info.id,utils.localData("curId",$scope.curId),utils.localData("curType",$scope.curType),$state.go("app.patient.patient_list",{id:info.id},{reload:!1})}var cnt_list=$("#cnt_list"),groupId=(cnt_list.find(".list-group-item"),utils.localData("curGroupId")),isDiseaseType=!1;if($scope.loading=!0,"disease"===$stateParams.type&&(isDiseaseType=!0),isDiseaseType&&($rootScope.curType="4",$rootScope.typeName="病种"),isDiseaseType)var dataUrl=app.url.yiliao.getDiseaseTree,extra=!1,root={selectable:!1,name:"病种结构"},datakey={id:"id",name:"name",sub:"children"},keys={name:"name",id:"id",pid:"department",description:"description"},icons={arrow:"fa fa-caret-right/fa fa-caret-down",check:"fa fa-check/fa fa-square",root:"fa fa-cubes cfblue",branch:"fa fa-medkit msblue",leaf:"fa fa-stethoscope dcolor",head:"headPicFileName"};else{isDiseaseType=!1;var dataUrl=app.url.yiliao.getAllData,extra=({url:app.url.yiliao.getDepartmentDoctor,dataKey:{departmentId:"id"},data:{access_token:app.url.access_token,groupId:groupId,status:"C",type:1},dataName:"",target:{data:"",dataKey:{id:"id",name:"name"}}},[{name:"未分配",id:"idx_0",parentId:0,subList:[],icon:"fa fa-bookmark"}]);root={selectable:!0,name:utils.localData("curGroupName"),id:0},datakey={id:"id",name:"name",sub:"subList"},keys={name:"name",id:"id",pid:"parentId",description:"description"},icons={arrow:"fa fa-caret-right/fa fa-caret-down",check:"fa fa-check/fa fa-square",root:"fa fa-hospital-o cfblue",branch:"fa fa-h-square cfblue",leaf:"fa fa-h-square cfblue",head:"headPicFileName"}}var contacts=new Tree("cnt_list",{hasCheck:!1,allCheck:!1,multiple:!1,allHaveArr:!1,self:!0,search:!1,arrType:[1,1,1,1,1,1,1],data:{url:dataUrl,param:{access_token:app.url.access_token,groupId:groupId}},async:!1,extra:extra,icons:icons,root:root,datakey:datakey,info:{name:"name",id:"id",pid:"parentId",dpt:"departments",description:"description",param:"param",icon:"icon",url:"url",isExtra:"isExtra",target:"target"},events:{click:forward},callback:function(){isDiseaseType?contacts.getTree().find("dt").eq(1).trigger("click"):contacts.getTree().find("dt").eq(0).trigger("click")}})});